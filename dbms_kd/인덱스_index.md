# 인덱스(INDEX)

##### 데이터를 좀 더 빠르게 찾을 수 있도록 해주는 도구

* 검색은 속도가 무척 빨라질 수 있다.(항상 그런 것은 아님)
  * 해당 쿼리의 부하가 줄어, 시스템 성능이 향상될 수 있다.



* 인덱스가 데이터베이스의 추가 공간을 차지해진다.(데이터베이스의 10%크기 정도)
* 처음에 인덱스 생성하는데 시간이 오래 걸릴 수 있다.
* 데이터 변경 작업이 잦으면, 성능이 오히려 떨어질 수 있다.

---

## 클러스터형 인덱스 / 보조 인덱스

#### 영어사전 VS 책의 <찾아보기>

#### 클러스터형 인덱스

* 테이블 당 한개만 생성
* 행 데이터를 인덱스로 지정한 열에 맞춰서 자동 정렬
* EX)영어사전



#### 보조 인덱스

* 테이블 당 여러개 생성가능
* 클러스터형인덱스가 비었다고, 보조 인덱스가 클러스터형 인덱스가 되지는 않는다.
* EX) 책 맨 뒤에 <찾아보기> 같은 역할

---

#### 자동으로 생성되는 인덱스

* PRIMARY KEY로 지정한 열은 클러스터형 인덱스가 생성된다.
* UNIQUE NOT NULL로 지정한 열은 클러스터형 인덱스가 생성된다.
  * PRIMARY KEY가 설정되면, 그 열에 클러스터형 인덱스 생성 (기본키가 항상 먼저)
* UNIQUE(OR UNIQUE NULL)로 지정된 열은 보조 인덱스가 생성된다.
* PRIMARY KEY로 지정한 열(또는 클러스터형 인덱스가 생성된 열)로 데이터가 오름차순으로 정렬된다.

---

### 인덱스 내부 작동

#### B-Tree(Balanced Tree,균형 트리)

* 루트노드(Root Node) , 루트 페이지
  * 가장 상위 노드
* 리프 노드(Leaf Node) , 리프 페이지
  * 잎 노드, 가장 하위에 존재하는 노드
  * 노드 === 페이지
  * 깊은 레벨(데이터가 많을 때) 더욱 효과적

#### 페이지 분할,인덱스 구조(클러스터vs보조)

> google

---

### 인덱스 생성/변경/삭제

#### 인덱스 생성

* CREATE INDEX로 인덱스를 생성하면 보조 인덱스가 생성
  * 오름차순 정렬이 기본값
  * index_type을 생략하면 기본값은 B-TREE 형식 사용



#### 인덱스 제거

```mariadb
DROP INDEX 인덱스 이름 ON 테이블이름;
```

* 기본 키로 설정된 클러스터형 인덱스이름은 항상 PRIMARY KEY
  * 기본 키 제거하면 자동으로 제거
  * ALTER TABLE 로 기본키 제거하면 자동으로 클러스터형 인덱스 제거됨
* 인덱스를 제거할 때는 되도록이면 보조 인덱스 부터 제거하도록 한다.

---

#### 인덱스 성능/사용경우

> googling , book









